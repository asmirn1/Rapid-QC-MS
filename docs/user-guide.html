<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Rapid-QC-MS - User Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Rapid-QC-MS</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./overview.html" rel="" target="">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./installation.html" rel="" target="">
 <span class="menu-text">Installation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./quickstart.html" rel="" target="">
 <span class="menu-text">Quickstart</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./user-guide.html" rel="" target="" aria-current="page">
 <span class="menu-text">User Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./design.html" rel="" target="">
 <span class="menu-text">System Design</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./documentation.html" rel="" target="">
 <span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./faq.html" rel="" target="">
 <span class="menu-text">FAQ</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/czbiohub/Rapid-QC-MS" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#workspace-configuration-1" id="toc-workspace-configuration-1" class="nav-link active" data-scroll-target="#workspace-configuration-1">Workspace configuration</a>
  <ul class="collapse">
  <li><a href="#incorporating-metadata-for-specimens" id="toc-incorporating-metadata-for-specimens" class="nav-link" data-scroll-target="#incorporating-metadata-for-specimens">Incorporating metadata for Specimens</a></li>
  <li><a href="#setting-up-chromatography-methods" id="toc-setting-up-chromatography-methods" class="nav-link" data-scroll-target="#setting-up-chromatography-methods">Setting up chromatography methods</a>
  <ul class="collapse">
  <li><a href="#a.-add-a-chromatography-method" id="toc-a.-add-a-chromatography-method" class="nav-link" data-scroll-target="#a.-add-a-chromatography-method">3a. Add a chromatography method</a></li>
  <li><a href="#b.-select-the-chromatography-and-polarity-to-modify" id="toc-b.-select-the-chromatography-and-polarity-to-modify" class="nav-link" data-scroll-target="#b.-select-the-chromatography-and-polarity-to-modify">3b. Select the chromatography and polarity to modify</a></li>
  <li><a href="#c.-add-an-internal-standard-library" id="toc-c.-add-an-internal-standard-library" class="nav-link" data-scroll-target="#c.-add-an-internal-standard-library">3c. Add an internal standard library</a></li>
  </ul></li>
  <li><a href="#setting-up-biological-standards" id="toc-setting-up-biological-standards" class="nav-link" data-scroll-target="#setting-up-biological-standards">Setting up biological standards</a></li>
  <li><a href="#configuring-qc-parameters" id="toc-configuring-qc-parameters" class="nav-link" data-scroll-target="#configuring-qc-parameters">Configuring QC parameters</a></li>
  <li><a href="#configuring-ms-dial-processing-parameters" id="toc-configuring-ms-dial-processing-parameters" class="nav-link" data-scroll-target="#configuring-ms-dial-processing-parameters">Configuring MS-DIAL processing parameters</a></li>
  </ul></li>
  <li><a href="#google-drive-sync-1" id="toc-google-drive-sync-1" class="nav-link" data-scroll-target="#google-drive-sync-1">Google Drive sync</a>
  <ul class="collapse">
  <li><a href="#setting-up-google-drive-sync" id="toc-setting-up-google-drive-sync" class="nav-link" data-scroll-target="#setting-up-google-drive-sync">Setting up Google Drive sync</a>
  <ul class="collapse">
  <li><a href="#create-a-project-in-the-google-cloud-console" id="toc-create-a-project-in-the-google-cloud-console" class="nav-link" data-scroll-target="#create-a-project-in-the-google-cloud-console">1. Create a project in the Google Cloud Console</a></li>
  <li><a href="#configure-the-oauth-consent-screen" id="toc-configure-the-oauth-consent-screen" class="nav-link" data-scroll-target="#configure-the-oauth-consent-screen">2. Configure the OAuth consent screen</a></li>
  <li><a href="#generate-the-oauth-client-id" id="toc-generate-the-oauth-client-id" class="nav-link" data-scroll-target="#generate-the-oauth-client-id">3. Generate the OAuth Client ID</a></li>
  </ul></li>
  <li><a href="#adding-instruments-to-workspace" id="toc-adding-instruments-to-workspace" class="nav-link" data-scroll-target="#adding-instruments-to-workspace">Adding instruments to workspace</a></li>
  <li><a href="#granting-revoking-workspace-access" id="toc-granting-revoking-workspace-access" class="nav-link" data-scroll-target="#granting-revoking-workspace-access">Granting / revoking workspace access</a></li>
  <li><a href="#signing-in-to-workspace-from-external-devices" id="toc-signing-in-to-workspace-from-external-devices" class="nav-link" data-scroll-target="#signing-in-to-workspace-from-external-devices">Signing in to workspace from external devices</a></li>
  </ul></li>
  <li><a href="#qc-notifications-1" id="toc-qc-notifications-1" class="nav-link" data-scroll-target="#qc-notifications-1">QC notifications</a>
  <ul class="collapse">
  <li><a href="#setting-up-slack-notifications" id="toc-setting-up-slack-notifications" class="nav-link" data-scroll-target="#setting-up-slack-notifications">Setting up Slack notifications</a>
  <ul class="collapse">
  <li><a href="#create-your-slack-bot" id="toc-create-your-slack-bot" class="nav-link" data-scroll-target="#create-your-slack-bot">1. Create your Slack bot</a></li>
  <li><a href="#generate-an-oauth-token" id="toc-generate-an-oauth-token" class="nav-link" data-scroll-target="#generate-an-oauth-token">2. Generate an OAuth token</a></li>
  <li><a href="#give-token-to-rapid-qc-ms" id="toc-give-token-to-rapid-qc-ms" class="nav-link" data-scroll-target="#give-token-to-rapid-qc-ms">3. Give token to Rapid-QC-MS</a></li>
  </ul></li>
  <li><a href="#setting-up-email-notifications" id="toc-setting-up-email-notifications" class="nav-link" data-scroll-target="#setting-up-email-notifications">Setting up email notifications</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">User Guide</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This page offers brief tutorials for usage and configuration of various Rapid-QC-MS features. Be sure to use the navigation guide below – or simply <code>Ctrl + F</code> – to find what you’re looking for.</p>
<section id="workspace-configuration" class="level4">
<h4 class="anchored" data-anchor-id="workspace-configuration">Workspace configuration</h4>
<ul>
<li><a href="#incorporating-metadata-for-Specimens">Incorporating metadata for Specimens</a></li>
<li><a href="#setting-up-chromatography-methods">Setting up chromatography methods</a></li>
<li><a href="#setting-up-biological-standards">Setting up biological standards</a></li>
<li><a href="#configuring-qc-parameters">Configuring QC parameters</a></li>
<li><a href="#configuring-ms-dial-processing-parameters">Configuring MS-DIAL processing parameters</a></li>
</ul>
</section>
<section id="dashboard-usage" class="level4">
<h4 class="anchored" data-anchor-id="dashboard-usage">Dashboard usage</h4>
<ul>
<li><a href="./overview.html#new-qc-job-setup">Setting up new QC jobs</a></li>
<li><a href="./overview.html#retention-time-across-specimens">Retention time across Specimens plot</a></li>
<li><a href="./overview.html#intensity-across-specimens">Intensity across Specimens plot</a></li>
<li><a href="./overview.html#delta-mz-across-specimens">Delta m/z across Specimens plot</a></li>
<li><a href="./overview.html#biological-standards">Targeted feature m/z across RT plot</a></li>
</ul>
</section>
<section id="google-drive-sync" class="level4">
<h4 class="anchored" data-anchor-id="google-drive-sync">Google Drive sync</h4>
<ul>
<li><a href="#setting-up-google-drive-sync">Setting up Google Drive sync</a></li>
<li><a href="#adding-instruments-to-workspace">Adding instruments to workspace</a></li>
<li><a href="#granting--revoking-workspace-access">Granting / revoking workspace access</a></li>
<li><a href="#signing-in-to-workspace-from-external-devices">Signing in to workspace from external devices</a></li>
</ul>
</section>
<section id="qc-notifications" class="level4">
<h4 class="anchored" data-anchor-id="qc-notifications">QC notifications</h4>
<ul>
<li><a href="#setting-up-slack-notifications">Setting up Slack notifications</a></li>
<li><a href="#setting-up-email-notifications">Setting up email notifications</a></li>
</ul>
</section>
<section id="workspace-configuration-1" class="level1">
<h1>Workspace configuration</h1>
<section id="incorporating-metadata-for-specimens" class="level2">
<h2 class="anchored" data-anchor-id="incorporating-metadata-for-specimens">Incorporating metadata for Specimens</h2>
<p>To map metadata to Specimens, you can create a metadata table in CSV format and fill the following columns (where applicable):</p>
<ul>
<li>Filename</li>
<li>Name from collaborator</li>
<li>Specimen Name</li>
<li>Species</li>
<li>Matrix</li>
<li>Growth-Harvest Conditions</li>
<li>Treatment</li>
</ul>
<p>Here is an example metadata table:</p>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 18%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>Filename</th>
<th>Name from collaborator</th>
<th>Specimen Name</th>
<th>Species</th>
<th>Matrix</th>
<th>Growth-Harvest Conditions</th>
<th>Treatment</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Specimen_001</td>
<td>A_1</td>
<td>EMGO001_A_1</td>
<td>Human HEK293T</td>
<td>Whole cell</td>
<td>Flash Frozen</td>
<td>BHB</td>
<td></td>
</tr>
<tr class="even">
<td>Specimen_002</td>
<td>A_2</td>
<td>EMGO001_A_2</td>
<td>Human HEK293T</td>
<td>Whole cell</td>
<td>Flash Frozen</td>
<td>Butyrate</td>
<td></td>
</tr>
<tr class="odd">
<td>Specimen_003</td>
<td>A_3</td>
<td>EMGO001_A_3</td>
<td>Human HEK293T</td>
<td>Whole cell</td>
<td>Flash Frozen</td>
<td>No treatment</td>
<td></td>
</tr>
</tbody>
</table>
<p>Including a metadata table in a QC job allows metadata to be viewed in Specimen information cards. It also allows the intensity across Specimens plot to be filtered by treatments.</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Overview/specimen_card.png" class="img-fluid"></p>
</section>
<section id="setting-up-chromatography-methods" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-chromatography-methods">Setting up chromatography methods</h2>
<p>The workflow for configuring chromatography methods is simple:</p>
<ol type="a">
<li>Add a chromatography method</li>
<li>Select the chromatography and polarity to modify</li>
<li>Add an internal standard library</li>
<li><em>Optional: Set a different MS-DIAL processing configuration</em></li>
</ol>
<section id="a.-add-a-chromatography-method" class="level3">
<h3 class="anchored" data-anchor-id="a.-add-a-chromatography-method">3a. Add a chromatography method</h3>
<p>Navigate to <strong>Settings &gt; Chromatography Methods.</strong> In the <strong>Manage chromatography methods</strong> section at the top, add a new chromatography method by giving it a name and clicking <strong>Add method</strong>.</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Overview/settings_chrom_with_methods.png" class="img-fluid"></p>
<p>If successful, you should see your new method in the <strong>Chromatography Methods</strong> table.</p>
</section>
<section id="b.-select-the-chromatography-and-polarity-to-modify" class="level3">
<h3 class="anchored" data-anchor-id="b.-select-the-chromatography-and-polarity-to-modify">3b. Select the chromatography and polarity to modify</h3>
<p>Internal standards must be configured for both positive and negative mode for each chromatography method.</p>
<p>Let’s start by selecting the chromatography method you created, and then selecting <strong>Positive Mode</strong> for the polarity.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Quickstart/zoomed_select_posneg.png" class="img-fluid"></p>
</blockquote>
</section>
<section id="c.-add-an-internal-standard-library" class="level3">
<h3 class="anchored" data-anchor-id="c.-add-an-internal-standard-library">3c. Add an internal standard library</h3>
<p>Now, we can specify our internal standard library. Rapid-QC-MS accepts identification libraries in either MSP or CSV format.</p>
<p>It is important to note that MS-DIAL can only perform MS2 spectral matching using MSP libraries. If you use a CSV library, identification will be performed via m/z and RT matches.</p>
<p>Here is an example internal standard library in CSV format:</p>
<table class="table">
<thead>
<tr class="header">
<th>Common Name</th>
<th>MS1 m/z</th>
<th>RT (min)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1_Methionine_d8</td>
<td>158.1085398</td>
<td>7.479</td>
</tr>
<tr class="even">
<td>1_1_Methylnicotinamide_d3</td>
<td>141.0975946</td>
<td>6.217</td>
</tr>
<tr class="odd">
<td>1_Creatinine_d3</td>
<td>117.0850186</td>
<td>4.908</td>
</tr>
<tr class="even">
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr class="odd">
<td>1_Lysine d8</td>
<td>155.1630181</td>
<td>9.578</td>
</tr>
<tr class="even">
<td>1_Phenylalanine d8</td>
<td>174.136469</td>
<td>6.92</td>
</tr>
<tr class="odd">
<td>1_Hippuric acid d5</td>
<td>185.0969033</td>
<td>3.011</td>
</tr>
</tbody>
</table>
<p>And here is one internal standard from a library in MSP format:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>NAME: <span class="dv">1</span><span class="er">_HippuricAcid_d5</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>SCANNUMBER: <span class="dv">1229</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>RETENTIONTIME: <span class="fl">3.011485</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>PRECURSORMZ: <span class="fl">185.0967</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>PRECURSORTYPE: [M<span class="op">+</span>H]<span class="op">+</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>IONMODE: Positive</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>INTENSITY: <span class="fl">2.157809E+07</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>ISOTOPE: M <span class="op">+</span> <span class="dv">0</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>INCHIKEY:</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>SMILES:</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>FORMULA:</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>Num Peaks: <span class="dv">33</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fl">51.02318</span>    <span class="dv">5550</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fl">56.94302</span>    <span class="dv">2599</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fl">57.93503</span>    <span class="dv">32786</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fl">171.3111</span>    <span class="dv">3202</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fl">181.08981</span>   <span class="dv">2837</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fl">185.09656</span>   <span class="dv">4996</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Click the <strong>Browse Files</strong> button to browse for your MSP or CSV file, then click the <strong>Add MSP to <chromatography> Positive Mode</chromatography></strong> button.</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Quickstart/add_msp.png" class="img-fluid"></p>
<p>After a few seconds, your screen should look something like this.</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Quickstart/success.png" class="img-fluid"></p>
<p>You can confirm that the library was successfully added by scrolling up to the <strong>Chromatography Methods</strong> table and seeing the updated number of Pos (+) Standards.</p>
<p>That’s it! Now, you can select Negative Mode from the polarity dropdown and add your negative mode internal standards.</p>
</section>
</section>
<section id="setting-up-biological-standards" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-biological-standards">Setting up biological standards</h2>
<p>Biological standards are used to benchmark instrument performance based on the intensity of targeted features in the biological standard Specimens.</p>
<p>You can configure Rapid-QC-MS to detect and process biological standards accordingly using the following guide:</p>
<ol type="1">
<li>Navigate to <strong>Settings &gt; Chromatography Methods</strong>.</li>
<li><strong>Create a biological standard:</strong> this requires providing a name and sequence identifier.</li>
<li><strong>Select the chromatography method to edit:</strong> you can add libraries for different chromatography methods and polarities.</li>
<li><strong>Add an MSP library:</strong> this MSP library will be used for the biological standard / chromatography combination you select.</li>
</ol>
<p>The <strong>sequence identifier</strong> is simply the text string that identifies biological standards in your acquisition sequences. For example, if “bac_sup” is the identifier for a biological standard, then any Specimen with “bac_sup” in its filename will be processed as a biological standard.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Overview/settings_bio_stnds.png" class="img-fluid"></p>
</blockquote>
<p>Targeted feature libraries must be in MSP format. Here is an example of one targeted feature in an MSP library.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>NAME: Hippuric acid d5</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>SCANNUMBER: <span class="dv">1229</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>RETENTIONTIME: <span class="fl">3.011485</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>PRECURSORMZ: <span class="fl">185.0967</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>PRECURSORTYPE: [M<span class="op">+</span>H]<span class="op">+</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>IONMODE: Positive</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>INTENSITY: <span class="fl">2.157809E+07</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>ISOTOPE: M <span class="op">+</span> <span class="dv">0</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>INCHIKEY:</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>SMILES:</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>FORMULA:</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>Num Peaks: <span class="dv">33</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fl">51.02318</span>    <span class="dv">5550</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fl">56.94302</span>    <span class="dv">2599</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fl">57.93503</span>    <span class="dv">32786</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fl">171.3111</span>    <span class="dv">3202</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fl">181.08981</span>   <span class="dv">2837</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="fl">185.09656</span>   <span class="dv">4996</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also specify different processing configurations for biological standards by using the <strong>MS-DIAL processing configuration</strong> dropdown. These configurations can be created and saved in <strong>Settings &gt; MS-DIAL Configurations.</strong></p>
</section>
<section id="configuring-qc-parameters" class="level2">
<h2 class="anchored" data-anchor-id="configuring-qc-parameters">Configuring QC parameters</h2>
<p>Navigate to <strong>Settings &gt; QC Configurations</strong> to define your QC criteria. Briefly, these are:</p>
<ol type="1">
<li><strong>Intensity dropouts cutoff:</strong> the minimum number of missing internal standards in a Specimen to constitute a QC fail</li>
<li><strong>RT shift from library value cutoff:</strong> the minimum retention time shift from the expected library value to constitute a QC fail</li>
<li><strong>RT shift from in-run average cutoff:</strong> the minimum retention time shift from the average RT during the course of the run to constitute a QC fail</li>
<li><strong>m/z shift from library value cutoff:</strong> the minimum m/z shift from the expected library value to constitute a QC fail</li>
</ol>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Quickstart/is_config_default.png" class="img-fluid"></p>
<p>Rapid-QC-MS stores individual parameters in <strong>configurations</strong>, so that you can configure a specific configuration to fit each chromatography method. Every installation comes preloaded with a “Default” configuration containing recommended parameters.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Overview/settings_is_config.png" class="img-fluid"></p>
</blockquote>
<p>You can specify these parameters however you’d like, and enable / disable them as needed. To revert a configuration back to the default recommended settings, simply click the <strong>Reset default settings</strong> button.</p>
<p>Once you’re done, don’t forget to click <strong>Save changes</strong>!</p>
</section>
<section id="configuring-ms-dial-processing-parameters" class="level2">
<h2 class="anchored" data-anchor-id="configuring-ms-dial-processing-parameters">Configuring MS-DIAL processing parameters</h2>
<p><a href="http://prime.psc.riken.jp/compms/msdial/main.html">MS-DIAL</a> is the processing software used to quantify internal standards in Specimens and targeted features in biological standards.</p>
<p>Rapid-QC-MS stores a set of MS-DIAL parameters in <strong>configurations</strong>, so that you can configure a specific configuration to fit each chromatography method. Every installation comes preloaded with a “Default” configuration containing recommended parameters.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Overview/settings_msdial.png" class="img-fluid"></p>
</blockquote>
<p>You can create a new configuration using the <strong>Add new MS-DIAL configuration</strong> text field. Then, select it from the dropdown to edit its parameters. Once you’re done, the MS-DIAL configuration can be applied to chromatography methods and biological standards.</p>
<p>A wide range of parameters are available for modification to fit the user’s needs:</p>
<ul>
<li>Retention time begin</li>
<li>Retention time end</li>
<li>Mass range begin</li>
<li>Mass range end</li>
<li>MS1 centroid tolerance</li>
<li>MS2 centroid tolerance</li>
<li>Smoothing method</li>
<li>Smoothing level</li>
<li>Mass slice width</li>
<li>Minimum peak width: Peak width threshold</li>
<li>Minimum peak height: Peak height threshold</li>
<li>Post-identification retention time tolerance</li>
<li>Post-identification accurate MS1 tolerance</li>
<li>Post-identification similarity score cutoff</li>
<li>Alignment retention time tolerance</li>
<li>Alignment MS1 tolerance</li>
<li>Alignment retention time factor</li>
<li>Alignment MS1 factor</li>
<li>Peak count filter</li>
<li>QC at least filter</li>
</ul>
<p>For more details on MS-DIAL parameters, see the documentation <a href="https://systemsomicslab.github.io/mtbinfo.github.io/MS-DIAL/tutorial#section-2-3">here</a>.</p>
<p>Once you’re done editing, don’t forget to click <strong>Save changes</strong>! You can now apply this processing configuration to your chromatography methods and biological standards.</p>
</section>
</section>
<section id="google-drive-sync-1" class="level1">
<h1>Google Drive sync</h1>
<section id="setting-up-google-drive-sync" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-google-drive-sync">Setting up Google Drive sync</h2>
<p>To allow access to your workspace from any device, you must first create a project in the Google Cloud Console and generate an OAuth Client ID for your installation of Rapid-QC-MS.</p>
<p><strong>These actions only need to be performed once.</strong> Upon completion, any shared user will be able to use the Client ID and Client Secret to sign in to your workspace.</p>
<section id="create-a-project-in-the-google-cloud-console" class="level3">
<h3 class="anchored" data-anchor-id="create-a-project-in-the-google-cloud-console">1. Create a project in the Google Cloud Console</h3>
<p>In case the above steps are too difficult to follow, below is a detailed walkthrough of the process with screenshots.</p>
<p>Navigate to the <a href="https://console.cloud.google.com/">Google Cloud Console</a>. The landing page should look something like this:</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_newproject.png" class="img-fluid"></p>
</blockquote>
<p>Choose <strong>Create or select a project</strong>, then click <strong>New Project</strong>.</p>
<p>Name the project whatever you like, ideally something partly unique that you’ll recognize, and click <strong>Create</strong>. If you don’t see the Organization field, your account doesn’t belong to a google workspace. Without a workspace, the only option is to create an external app which does not work for our use case.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_nameandcreate.png" class="img-fluid"></p>
</blockquote>
<p>Then select your newly created project from the dropdown in the upper left</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_selectproject.png" class="img-fluid"></p>
</blockquote>
<p>Now, from the sidebar, navigate to <strong>Enabled APIs and services</strong> and click <strong>Enable APIs and Services</strong>.</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_apis_and_services.png" class="img-fluid"></p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_click_enable.png" class="img-fluid"></p>
</blockquote>
<p>Next, search for “Gmail API”, select it, and click the <strong>Enable</strong> button and wait for google to process your request. Once it’s enabled, go back and repeat the process for “Google Drive API”</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/googleaddapi.gif" class="img-fluid"></p>
<p>If all went well, both API’s should be visible on the API &amp; Services package</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_after_api_add.png" class="img-fluid"></p>
</section>
<section id="configure-the-oauth-consent-screen" class="level3">
<h3 class="anchored" data-anchor-id="configure-the-oauth-consent-screen">2. Configure the OAuth consent screen</h3>
<p>From the sidebar, navigate to <strong><a href="https://console.cloud.google.com/apis/credentials/consent">APIs &amp; Services &gt; OAuth consent screen</a></strong>.</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_click_enable.png" class="img-fluid"></p>
<p>For user type, choose <strong>Internal</strong> and click <strong>Create</strong>. Fill in the following:</p>
<ul>
<li>App name: Something unique to you or your organization + RapidQCMS</li>
<li>User support email: [youremail]</li>
<li>Developer contact information (at the bottom): [youremail]</li>
</ul>
<p>Once you’re done, click <strong>Save and Continue</strong> at the bottom.</p>
<p>On the next screen, select <strong>Add or Remove Scopes</strong>. Scroll down to the <strong>Manually add scopes</strong> section and paste in the following:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>https:<span class="op">//</span>www.googleapis.com<span class="op">/</span>auth<span class="op">/</span>drive</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>https:<span class="op">//</span>www.googleapis.com<span class="op">/</span>auth<span class="op">/</span>gmail.send</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>https:<span class="op">//</span>www.googleapis.com<span class="op">/</span>auth<span class="op">/</span>userinfo.email</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_add_scopes.png" class="img-fluid"></p>
</blockquote>
<p>Click <strong>Add to Table</strong>. Then click <strong>Update</strong>. Then click <strong>Save and Continue</strong> at the bottom on the left.</p>
</section>
<section id="generate-the-oauth-client-id" class="level3">
<h3 class="anchored" data-anchor-id="generate-the-oauth-client-id">3. Generate the OAuth Client ID</h3>
<p>From the sidebar, navigate to <strong><a href="https://console.cloud.google.com/apis/credentials">APIs &amp; Services &gt; Credentials</a></strong>.</p>
<p>Click the <strong>Create Credentials</strong> button and select <strong>OAuth client ID</strong>.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_create_credentials.png" class="img-fluid"></p>
</blockquote>
<p>For application type, choose <strong>Desktop application</strong> and enter a name, this won’t show up except in logs so some combination of a unique name + desktop + RapidQCMS is fine (e.g.&nbsp;IraDesktopRapidQCMS).</p>
<p>Once you’re done, click <strong>Create</strong>. A dialog window will appear, providing your client ID and client secret.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_client_created.png" class="img-fluid"></p>
</blockquote>
<p>That’s it – you’re all set! Copy these and save them somewhere accessible. If you’re here from the Quickstart guide, <a href="./quickstart.html#optional-sync-with-google-drive">click here</a> to head back and use these credentials to <strong>set up</strong> or <strong>sign in</strong> to your workspace.</p>
</section>
</section>
<section id="adding-instruments-to-workspace" class="level2">
<h2 class="anchored" data-anchor-id="adding-instruments-to-workspace">Adding instruments to workspace</h2>
<p>To add an instrument to an existing Rapid-QC-MS workspace, perform the following steps:</p>
<ol type="1">
<li>Install Rapid-QC-MS on your instrument computer</li>
<li>Launch the app by entering <code>ms_autoqc</code> in a terminal window</li>
<li>Select the <strong>I’m setting up Rapid-QC-MS on a new instrument</strong> tab</li>
<li>Give your instrument a name and specify the vendor</li>
<li>Enter your client ID and client secret, then click <strong>Sign in to Google Drive</strong></li>
<li>Complete the authentication flow</li>
<li>Once you’re done, Rapid-QC-MS will alert you that your workspace was found</li>
<li>Click <strong>Complete setup</strong> and you’re all set!</li>
</ol>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/rapidqcms_welcome_screen.png" class="img-fluid"></p>
<p><strong>Important:</strong> Currently, it is not possible to add an instrument to an existing workspace after setup. If you want to add your instrument to an existing workspace, it must be done during setup immediately after a fresh install.</p>
</section>
<section id="granting-revoking-workspace-access" class="level2">
<h2 class="anchored" data-anchor-id="granting-revoking-workspace-access">Granting / revoking workspace access</h2>
<p>You can grant and revoke access to your Rapid-QC-MS workspace from <strong>Settings &gt; General</strong>.</p>
<p>Under <strong>Manage workspace access,</strong> add the email addresses for Google accounts you’d like to share your workspace with.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/rapidqcms_settings.png" class="img-fluid"></p>
</blockquote>
</section>
<section id="signing-in-to-workspace-from-external-devices" class="level2">
<h2 class="anchored" data-anchor-id="signing-in-to-workspace-from-external-devices">Signing in to workspace from external devices</h2>
<p>You can use your generated client ID and client secret to log in to your workspace from any device.</p>
<ol type="1">
<li>Install Rapid-QC-MS on your device</li>
<li>Launch the app by entering <code>ms_autoqc</code> in a terminal window</li>
<li>Select the <strong>I’m signing in to an existing Rapid-QC-MS workspace</strong> tab</li>
<li>Enter your client ID and client secret, then click <strong>Sign in to Google Drive</strong></li>
<li>Complete the authentication flow</li>
<li>Click <strong>Sign in to Rapid-QC-MS workspace</strong> and you’re all set!</li>
</ol>
<p><strong>Important:</strong> the <em>I’m signing in from an instrument computer</em> checkbox is intended for signing in to the workspace after reinstalls on the instrument computer.</p>
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/google_rapid_login.png" class="img-fluid"></p>
<p><strong>Important:</strong> To allow your team members to sign in to the workspace using their Google account, you must first <a href="#granting--revoking-workspace-access">grant them access in Settings &gt; General</a>.</p>
</section>
</section>
<section id="qc-notifications-1" class="level1">
<h1>QC notifications</h1>
<section id="setting-up-slack-notifications" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-slack-notifications">Setting up Slack notifications</h2>
<p>To set up Slack notifications, you must create your own Slack bot, generate an OAuth token for it, and give that token to Rapid-QC-MS in Settings &gt; General.</p>
<p><strong>You only need to do this once!</strong> After that, Rapid-QC-MS will use your token to alert you about QC warnings and QC fails.</p>
<section id="create-your-slack-bot" class="level3">
<h3 class="anchored" data-anchor-id="create-your-slack-bot">1. Create your Slack bot</h3>
<p>Navigate to the <a href="https://api.slack.com/apps">Slack API console</a> and click the <strong>Create New App</strong> button.</p>
<p>Choose to create your app <strong>From Scratch</strong>. Fill in the App Name (Rapid-QC-MS is fine) and your Slack workspace, then click <strong>Create App</strong>.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/slack_new_app.png" class="img-fluid"></p>
</blockquote>
</section>
<section id="generate-an-oauth-token" class="level3">
<h3 class="anchored" data-anchor-id="generate-an-oauth-token">2. Generate an OAuth token</h3>
<p>From the sidebar, navigate to <strong>Features &gt; OAuth &amp; Permissions</strong>.</p>
<p>Scroll down to the <strong>Scopes</strong> section. For <strong>Bot Token Scopes</strong>, add the following OAuth scopes:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>chat:write</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>chat:write.public</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>incoming<span class="op">-</span>webhook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/slack_add_bot_scopes.png" class="img-fluid"></p>
</blockquote>
<p>Now, scroll back up to the <strong>OAuth Tokens for Your Workspace</strong> section and click <strong>Install to Workspace</strong>, then copy the generated <strong>Bot User OAuth Token</strong>.</p>
</section>
<section id="give-token-to-rapid-qc-ms" class="level3">
<h3 class="anchored" data-anchor-id="give-token-to-rapid-qc-ms">3. Give token to Rapid-QC-MS</h3>
<p>In Rapid-QC-MS, navigate to <strong>Settings &gt; General</strong> and paste the <strong>Bot User OAuth Token</strong> you generated in the Slack API client credentials field. Click <strong>Save bot token</strong>.</p>
<p>Now, enter the name of the channel you’d like Rapid-QC-MS to post messages to. Once you’re done, toggle <strong>Enable notifications</strong>.</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/rapidqcms_slack_zoomed.png" class="img-fluid"></p>
</blockquote>
<p>Lastly, you may need to invite the bot to the channel. The easiest way of doing this is to just @botname in the channel and slack will ask if you want to invite it.</p>
</section>
</section>
<section id="setting-up-email-notifications" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-email-notifications">Setting up email notifications</h2>
<p>To set up email notifications, you must first <a href="#setting-up-google-drive-sync">enable Google Drive sync</a>.</p>
<p>Once that’s done, all you have to do is navigate to <strong>Settings &gt; General</strong> and register email addresses for notifications!</p>
<blockquote class="blockquote">
<p><img src="https://public.czbiohub.org/rapid-qc-ms-docs/Userguide/rapidqcms_emails.png" class="img-fluid"></p>
</blockquote>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.czbiohub.org/mass-spec/">
    </a>
  </li>  
    <li class="nav-item">
 © 2023 Chan Zuckerberg Biohub
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>